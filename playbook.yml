---
- name: Install MySQL in Ubuntu Server 22.04 instance
  hosts: db
  become: yes
  vars:
    db_name: wordpress_db
    db_username: wp_user
    db_user_password: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          33663035316663613561663433386131303062353038363934643063666166663430646533636433
          3635343164666166636663356338656563343263396463610a393838636637663331373563373137
          36616362613766373331663064653337636632393934613530366634323561373235383233666333
          6566333463326230610a393233333432366537303436336262626661373030613862653862623130
          35343434623532646439366263623434326264343535616139653530613631666539
  roles:
    - mysql

- name: Install WordPress in Ubuntu Server 22.04
  hosts: web
  become: yes
  vars:
    wp_db_name: wordpress_db
    wp_db_user: wp_user
    wp_db_password: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          33663035316663613561663433386131303062353038363934643063666166663430646533636433
          3635343164666166636663356338656563343263396463610a393838636637663331373563373137
          36616362613766373331663064653337636632393934613530366634323561373235383233666333
          6566333463326230610a393233333432366537303436336262626661373030613862653862623130
          35343434623532646439366263623434326264343535616139653530613631666539
    wp_db_host: 3.253.27.188  # MySQL server public IP
    wp_sitename: ansible.matiasroje-devops.dns-dynamic.net
  roles:
    - wordpress